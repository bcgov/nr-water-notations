#! <?xml version="1.0" encoding="UTF-8" ?>
#! <TRANSFORMER
# TRANSFORMER_BEGIN S3FileChangeDetector,1,,2db32e6c-14bb-49ab-b73c-4e2893861eb3,"Embedded Always",No,NO_PARALLELISM,,No,18578,YES,No,27
# 
# TRANSFORMER_END
#!   ATTR_TYPE_ENCODING="SDF"
#!   BLOCKED_LOOPING="No"
#!   CATEGORY=""
#!   DESCRIPTION=""
#!   DOC_EXTENTS="2093.77 1634.76"
#!   DOC_TOP_LEFT="90.6249 -1697.51"
#!   EXPLICIT_BOOKMARK_ORDER="false"
#!   FME_BUILD_NUM="18578"
#!   FME_DOCUMENT_GUID="2db32e6c-14bb-49ab-b73c-4e2893861eb3"
#!   FME_DOCUMENT_PRIORGUID=""
#!   FME_LINKED_TRANSFORMER_VERSION="1"
#!   FME_PROCESS_COUNT="NO_PARALLELISM"
#!   FME_PROCESS_GROUPS_ORDERED="No"
#!   FME_PROCESS_GROUP_BY=""
#!   FME_SERVER_SERVICES=""
#!   FMX_ATTRIBUTE_PROPOGATION_MODE="AUTO"
#!   FMX_INSERT_MODE="Embedded Always"
#!   HISTORY=""
#!   ITERATION_COUNT_ATTR=""
#!   LAST_SAVE_BUILD="FME(R) 2018.1.1.1 (20181203 - Build 18578 - WIN64)"
#!   LAST_SAVE_DATE="2022-04-07T08:45:58"
#!   MARKDOWN_DESCRIPTION=""
#!   MARKDOWN_USAGE=""
#!   MAX_LOOP_ITERATIONS=""
#!   PASSWORD=""
#!   PYTHON_COMPATIBILITY="27"
#!   SHOW_ANNOTATIONS="true"
#!   SHOW_INFO_NODES="true"
#!   TITLE="S3FileChangeDetector"
#!   USAGE=""
#!   USE_MARKDOWN="NO"
#!   VIEW_POSITION="0 -187.502"
#!   WARN_INVALID_XFORM_PARAM="Yes"
#!   WORKSPACE_VERSION="1"
#!   XFORM_DEPRECATED="No"
#!   ZOOM_SCALE="100"
#! >
#! <DATASETS>
#! </DATASETS>
#! <DATA_TYPES>
#! </DATA_TYPES>
#! <GEOM_TYPES>
#! </GEOM_TYPES>
#! <FEATURE_TYPES>
#! </FEATURE_TYPES>
#! <FMESERVER>
#! </FMESERVER>
#! <GLOBAL_PARAMETERS>
#! </GLOBAL_PARAMETERS>
#! <COMMENTS>
#! <COMMENT
#!   IDENTIFIER="5"
#!   COMMENT_VALUE="&lt;html&gt;&lt;body&gt;Step 1: Expose the &apos;fme_dataset&apos; attribute.&#13;&lt;br&gt;For file-based data sources, this provides the full&#13;&lt;br&gt;path file name.  This attribute provides a key to&#13;&lt;br&gt;retrieving the status indicator for file-based change&#13;&lt;br&gt;determined by the python startup script.&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="512.25561574890548 -62.752379498282494"
#!   TOP_LEFT="512.25561574890548 -62.752379498282494"
#!   BOTTOM_RIGHT="512.25561574890548 -62.752379498282494"
#!   BOUNDING_RECT="512.25561574890548 -62.752379498282494 0 0"
#!   ORDER="16"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   COLOUR="1,1,0.78431372549019607,0.19215686274509805"
#!   SIZE_POLICY="8"
#!   ANCHORED_NODE="4"
#! />
#! <COMMENT
#!   IDENTIFIER="10"
#!   COMMENT_VALUE="&lt;html&gt;&lt;body&gt;Step 3: A new CHANGE DETECTED &#13;&lt;br&gt;attribute is added to each feature, and&#13;&lt;br&gt;populated with the TRUE or FALSE &#13;&lt;br&gt;value determined in the python start&#13;&lt;br&gt;up script.&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="641.00697606421863 -701.6337233117207"
#!   TOP_LEFT="641.00697606421863 -701.6337233117207"
#!   BOTTOM_RIGHT="641.00697606421863 -701.6337233117207"
#!   BOUNDING_RECT="641.00697606421863 -701.6337233117207 0 0"
#!   ORDER="14"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   COLOUR="1,1,0.78431372549019607,0.19215686274509805"
#!   SIZE_POLICY="8"
#!   ANCHORED_NODE="9"
#! />
#! <COMMENT
#!   IDENTIFIER="13"
#!   COMMENT_VALUE="&lt;html&gt;&lt;body&gt;Step 4: Features are filtered according &#13;&lt;br&gt;to the CHANGE DETECTED boolean&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="606.75439179562704 -1697.5125726030756"
#!   TOP_LEFT="606.75439179562704 -1697.5125726030756"
#!   BOTTOM_RIGHT="606.75439179562704 -1697.5125726030756"
#!   BOUNDING_RECT="606.75439179562704 -1697.5125726030756 0 0"
#!   ORDER="18"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   COLOUR="1,1,0.78431372549019607,0.19215686274509805"
#!   SIZE_POLICY="8"
#!   ANCHORED_NODE="12"
#! />
#! <COMMENT
#!   IDENTIFIER="20"
#!   COMMENT_VALUE="&lt;html&gt;&lt;body&gt;Step 5: Features deemed to have been&#13;&lt;br&gt;sourced from a file dataset that has &#13;&lt;br&gt;changed are stripped of interim processing&#13;&lt;br&gt;attributes.&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="1638.8927184271893 -1148.0126251262514"
#!   TOP_LEFT="1638.8927184271893 -1148.0126251262514"
#!   BOTTOM_RIGHT="1638.8927184271893 -1148.0126251262514"
#!   BOUNDING_RECT="1638.8927184271893 -1148.0126251262514 0 0"
#!   ORDER="17"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   COLOUR="1,1,0.78431372549019607,0.19215686274509805"
#!   SIZE_POLICY="8"
#!   ANCHORED_NODE="19"
#! />
#! <COMMENT
#!   IDENTIFIER="23"
#!   COMMENT_VALUE="&lt;html&gt;&lt;body&gt;Step 5: Features deemed to have been&#13;&lt;br&gt;sourced from a file dataset that has &#13;&lt;br&gt;changed are stripped of interim processing&#13;&lt;br&gt;attributes.&lt;/body&gt;&lt;/html&gt;"
#!   POSITION="1352.2668914206283 -561.386160836096"
#!   TOP_LEFT="1352.2668914206283 -561.386160836096"
#!   BOTTOM_RIGHT="1352.2668914206283 -561.386160836096"
#!   BOUNDING_RECT="1352.2668914206283 -561.386160836096 0 0"
#!   ORDER="17"
#!   FOLLOW_ANCHOR="true"
#!   INFO_NODE="false"
#!   COLOUR="1,1,0.78431372549019607,0.19215686274509805"
#!   SIZE_POLICY="8"
#!   ANCHORED_NODE="22"
#! />
#! </COMMENTS>
#! <CONSTANTS>
#! </CONSTANTS>
#! <BOOKMARKS>
#! </BOOKMARKS>
#! <TRANSFORMERS>
#! <TRANSFORMER
#!   IDENTIFIER="4"
#!   TYPE="AttributeExposer"
#!   VERSION="0"
#!   POSITION="700.25561574890651 -349.75237949828249"
#!   BOUNDING_RECT="700.25561574890651 -349.75237949828249 0 0"
#!   ORDER="8"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="14440"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="fme_dataset"/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CD_1:_ExposeFMEDatasetName"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="6"
#!   TYPE="PythonCaller"
#!   VERSION="4"
#!   POSITION="700.25561574890673 -543.75575953203258"
#!   BOUNDING_RECT="700.25561574890673 -543.75575953203258 -1 -1"
#!   ORDER="500000000000001"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="18578"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ADVANCED_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="HIDE_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="NEW_ATTRIBUTES" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PYTHONSOURCE" PARM_VALUE="&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;Code&lt;space&gt;here&lt;space&gt;will&lt;space&gt;get&lt;space&gt;put&lt;space&gt;into&lt;space&gt;an&lt;space&gt;FME&lt;space&gt;transformer&lt;space&gt;to&lt;space&gt;support&lt;space&gt;the&lt;space&gt;ability&lt;space&gt;to&lt;space&gt;detect&lt;lf&gt;file&lt;space&gt;change&lt;space&gt;on&lt;space&gt;an&lt;space&gt;object&lt;space&gt;storage&lt;space&gt;object.&lt;lf&gt;&lt;lf&gt;How&lt;space&gt;it&lt;space&gt;works?&lt;lf&gt;&lt;lf&gt;a&lt;closeparen&gt;&lt;space&gt;Inputs:&lt;space&gt;name&lt;space&gt;&lt;solidus&gt;&lt;space&gt;path&lt;space&gt;to&lt;space&gt;a&lt;space&gt;file&lt;space&gt;in&lt;space&gt;object&lt;space&gt;storage&lt;lf&gt;b&lt;closeparen&gt;&lt;space&gt;script&lt;space&gt;will&lt;space&gt;look&lt;space&gt;for&lt;space&gt;the&lt;space&gt;eqivalent&lt;space&gt;file&lt;space&gt;with&lt;space&gt;a&lt;space&gt;.filechange&lt;space&gt;suffix&lt;space&gt;on&lt;space&gt;it&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;that&lt;space&gt;file&lt;space&gt;doesn&lt;apos&gt;t&lt;space&gt;exist&lt;space&gt;it&lt;space&gt;is&lt;space&gt;created&lt;space&gt;and&lt;space&gt;the&lt;space&gt;contents&lt;space&gt;of&lt;space&gt;the&lt;space&gt;objects&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;etag&lt;space&gt;is&lt;space&gt;copied&lt;space&gt;to&lt;space&gt;that&lt;space&gt;file&lt;lf&gt;c&lt;closeparen&gt;&lt;space&gt;if&lt;space&gt;the&lt;space&gt;file&lt;space&gt;does&lt;space&gt;exist&lt;space&gt;the&lt;space&gt;contents&lt;space&gt;of&lt;space&gt;the&lt;space&gt;file&lt;space&gt;are&lt;space&gt;compared&lt;space&gt;with&lt;space&gt;the&lt;space&gt;etag&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;that&lt;space&gt;exists&lt;space&gt;in&lt;space&gt;object&lt;space&gt;storage.&lt;space&gt;&lt;space&gt;If&lt;space&gt;they&lt;space&gt;differ&lt;space&gt;the&lt;space&gt;file&lt;space&gt;has&lt;space&gt;changed&lt;comma&gt;&lt;space&gt;if&lt;space&gt;they&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;are&lt;space&gt;the&lt;space&gt;same&lt;space&gt;the&lt;space&gt;file&lt;space&gt;has&lt;space&gt;not&lt;space&gt;changed.&lt;lf&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;lf&gt;import&lt;space&gt;os&lt;lf&gt;import&lt;space&gt;requests&lt;lf&gt;import&lt;space&gt;logging&lt;lf&gt;import&lt;space&gt;sys&lt;lf&gt;import&lt;space&gt;io&lt;lf&gt;from&lt;space&gt;urlparse&lt;space&gt;import&lt;space&gt;urlparse&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;LOGGER&lt;space&gt;=&lt;space&gt;logging.getLogger&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;ModuleInit:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;space&gt;this&lt;space&gt;is&lt;space&gt;a&lt;space&gt;hack&lt;space&gt;to&lt;space&gt;handle&lt;space&gt;the&lt;space&gt;s3&lt;space&gt;dependencies&lt;space&gt;this&lt;space&gt;module&lt;space&gt;will&lt;space&gt;search&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;the&lt;space&gt;directory&lt;space&gt;that&lt;space&gt;this&lt;space&gt;script&lt;space&gt;is&lt;space&gt;being&lt;space&gt;run&lt;space&gt;in&lt;space&gt;for&lt;space&gt;the&lt;space&gt;minio&lt;space&gt;module.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;it&lt;space&gt;it&lt;space&gt;cannot&lt;space&gt;be&lt;space&gt;found&lt;space&gt;then&lt;space&gt;the&lt;space&gt;class&lt;space&gt;will&lt;space&gt;install&lt;space&gt;it&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.installdir&lt;space&gt;=&lt;space&gt;&lt;apos&gt;pydeps&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.configurePaths&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;importing&lt;space&gt;minio&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;global&lt;space&gt;minio&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;import&lt;space&gt;minio&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.info&lt;openparen&gt;&lt;quote&gt;fetching&lt;space&gt;the&lt;space&gt;minio&lt;space&gt;module&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.install&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;configurePaths&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;FME_MF_DIR_UNIX_MASTER&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;curDir&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;__file__&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;NameError:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;import&lt;space&gt;fme&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#print&lt;space&gt;&lt;apos&gt;-&lt;apos&gt;*80&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#for&lt;space&gt;var&lt;space&gt;in&lt;space&gt;fme.macroValues:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;var&lt;comma&gt;&lt;space&gt;&lt;quote&gt;&lt;apos&gt;&lt;quote&gt;&lt;comma&gt;&lt;space&gt;fme.macroValues&lt;openbracket&gt;var&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;curDir&lt;space&gt;=&lt;space&gt;os.path.realpath&lt;openparen&gt;fme.macroValues&lt;openbracket&gt;&lt;apos&gt;FME_MF_DIR_UNIX_MASTER&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#curDir&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;__file__&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.depDir&lt;space&gt;=&lt;space&gt;os.path.realpath&lt;openparen&gt;os.path.join&lt;openparen&gt;curDir&lt;comma&gt;&lt;space&gt;self.installdir&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;os.path.exists&lt;openparen&gt;self.depDir&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;os.mkdir&lt;openparen&gt;self.depDir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pathList&lt;space&gt;=&lt;space&gt;os.environ&lt;openbracket&gt;&lt;apos&gt;PATH&lt;apos&gt;&lt;closebracket&gt;.split&lt;openparen&gt;&lt;apos&gt;&lt;semicolon&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pathList.insert&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;self.depDir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;sys.path.insert&lt;openparen&gt;0&lt;comma&gt;&lt;space&gt;self.depDir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;depdir:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;self.depDir&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;install&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;trustParams&lt;space&gt;=&lt;space&gt;&lt;quote&gt;--trusted-host&lt;space&gt;pypi.org&lt;space&gt;--trusted-host&lt;space&gt;pypi.python.ordfg&lt;space&gt;--trusted-host&lt;space&gt;files.pythonhosted.org&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#pipInstall&lt;space&gt;=&lt;space&gt;&lt;apos&gt;pip&lt;space&gt;install&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;-t&lt;space&gt;&lt;opencurly&gt;1&lt;closecurly&gt;&lt;space&gt;minio&lt;space&gt;--global&lt;space&gt;http.sslVerify&lt;space&gt;false&lt;apos&gt;.format&lt;openparen&gt;trustParams&lt;comma&gt;&lt;space&gt;depDir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;pipInstall&lt;space&gt;=&lt;space&gt;&lt;apos&gt;python&lt;space&gt;-m&lt;space&gt;pip&lt;space&gt;install&lt;space&gt;-t&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;minio==5.0.10&lt;apos&gt;.format&lt;openparen&gt;&lt;space&gt;self.depDir&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;pipInstall&lt;closeparen&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;print&lt;space&gt;pipInstall&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;os.system&lt;openparen&gt;pipInstall&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#LOGGER.debug&lt;openparen&gt;&lt;quote&gt;var:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;os.environ&lt;openbracket&gt;&lt;apos&gt;PATH&lt;apos&gt;&lt;closebracket&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;import&lt;space&gt;minio&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;constants:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.envVars&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;apos&gt;OBJECTSTORE_HOST&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;OBJECTSTORE_BUCKET&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;OBJECTSTORE_ID&lt;apos&gt;&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;apos&gt;OBJECTSTORE_SECRET&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;try:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;import&lt;space&gt;fme&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.getFMEMacroVars&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;except&lt;space&gt;ImportError:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.getEnvVars&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getFMEMacroVars&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;envVar&lt;space&gt;in&lt;space&gt;self.envVars:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;envVar&lt;space&gt;not&lt;space&gt;in&lt;space&gt;fme.macroValues:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;msg&lt;space&gt;=&lt;space&gt;&lt;quote&gt;Expecting&lt;space&gt;the&lt;space&gt;following&lt;space&gt;published&lt;space&gt;parameter:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;to&lt;space&gt;exist&lt;space&gt;but&lt;space&gt;it&lt;space&gt;cannot&lt;space&gt;be&lt;space&gt;found&lt;quote&gt;.format&lt;openparen&gt;envVar&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;ValueError&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;setattr&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;envVar&lt;comma&gt;&lt;space&gt;fme.macroValues&lt;openbracket&gt;envVar&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getEnvVars&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;slurping&lt;space&gt;the&lt;space&gt;list&lt;space&gt;of&lt;space&gt;env&lt;space&gt;vars&lt;space&gt;below&lt;space&gt;into&lt;space&gt;constants&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;envVar&lt;space&gt;in&lt;space&gt;self.envVars:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;envVar&lt;space&gt;not&lt;space&gt;in&lt;space&gt;os.environ:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;msg&lt;space&gt;=&lt;space&gt;&lt;quote&gt;expecting&lt;space&gt;the&lt;space&gt;following&lt;space&gt;env&lt;space&gt;vars&lt;space&gt;to&lt;space&gt;be&lt;space&gt;set&lt;space&gt;and&lt;space&gt;one&lt;space&gt;or&lt;space&gt;&lt;quote&gt;&lt;space&gt;+&lt;space&gt;&lt;backslash&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;more&lt;space&gt;of&lt;space&gt;them&lt;space&gt;are&lt;space&gt;not:&lt;space&gt;&lt;quote&gt;&lt;space&gt;+&lt;space&gt;&lt;apos&gt;&lt;comma&gt;&lt;apos&gt;.join&lt;openparen&gt;self.envVars&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;raise&lt;space&gt;ValueError&lt;openparen&gt;msg&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;setattr&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;envVar&lt;comma&gt;&lt;space&gt;os.environ&lt;openbracket&gt;envVar&lt;closebracket&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;ObjectChange:&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.installer&lt;space&gt;=&lt;space&gt;ModuleInit&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.changeSuffix&lt;space&gt;=&lt;space&gt;&lt;apos&gt;.filechange&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;connecting&lt;space&gt;to&lt;space&gt;object&lt;space&gt;storage&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.minIoClient&lt;space&gt;=&lt;space&gt;minio.Minio&lt;openparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;CONST.OBJECTSTORE_HOST&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;CONST.OBJECTSTORE_ID&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;CONST.OBJECTSTORE_SECRET&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;fixPath&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inputFile&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;space&gt;the&lt;space&gt;input&lt;space&gt;file&lt;space&gt;can&lt;space&gt;be&lt;space&gt;a&lt;space&gt;url&lt;space&gt;path&lt;comma&gt;&lt;space&gt;if&lt;space&gt;this&lt;space&gt;is&lt;space&gt;the&lt;space&gt;case&lt;space&gt;the&lt;space&gt;assumption&lt;space&gt;is&lt;space&gt;that&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;it&lt;space&gt;takes&lt;space&gt;this&lt;space&gt;format:&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;https:&lt;solidus&gt;&lt;solidus&gt;&lt;lt&gt;obj&lt;space&gt;store&lt;space&gt;domain&lt;gt&gt;&lt;solidus&gt;&lt;lt&gt;bucket&lt;space&gt;name&lt;gt&gt;&lt;solidus&gt;&lt;lt&gt;path&lt;space&gt;to&lt;space&gt;object&lt;gt&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;This&lt;space&gt;method&lt;space&gt;will&lt;space&gt;extract&lt;space&gt;the&lt;space&gt;object&lt;space&gt;name&lt;solidus&gt;path&lt;space&gt;from&lt;space&gt;the&lt;space&gt;url.&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:param&lt;space&gt;path:&lt;space&gt;input&lt;space&gt;path&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:type&lt;space&gt;path:str&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;t&lt;space&gt;=&lt;space&gt;urlparse&lt;openparen&gt;inputFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;path&lt;space&gt;=&lt;space&gt;t.path&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;path&lt;space&gt;=&lt;space&gt;path.replace&lt;openparen&gt;&lt;quote&gt;&lt;solidus&gt;&lt;quote&gt;&lt;space&gt;+&lt;space&gt;CONST.OBJECTSTORE_BUCKET&lt;comma&gt;&lt;space&gt;&lt;apos&gt;&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;path&lt;openbracket&gt;0&lt;closebracket&gt;&lt;space&gt;==&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;path&lt;space&gt;=&lt;space&gt;path&lt;openbracket&gt;1:&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;new&lt;space&gt;path:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;path&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;path&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;calcChangeFile&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inputFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;changeFilePath&lt;space&gt;=&lt;space&gt;os.path.splitext&lt;openparen&gt;inputFilePath&lt;closeparen&gt;&lt;openbracket&gt;0&lt;closebracket&gt;&lt;space&gt;+&lt;space&gt;self.changeSuffix&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;changeFilePath&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;listObjects&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inDir=None&lt;comma&gt;&lt;space&gt;recursive=True&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;returnFileNamesOnly=False&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;lists&lt;space&gt;the&lt;space&gt;objects&lt;space&gt;in&lt;space&gt;the&lt;space&gt;object&lt;space&gt;store.&lt;space&gt;&lt;space&gt;Run&lt;apos&gt;s&lt;space&gt;recursive&lt;comma&gt;&lt;space&gt;if&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;inDir&lt;space&gt;arg&lt;space&gt;is&lt;space&gt;provided&lt;space&gt;only&lt;space&gt;lists&lt;space&gt;objects&lt;space&gt;that&lt;space&gt;fall&lt;space&gt;under&lt;space&gt;that&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;directory&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:param&lt;space&gt;inDir:&lt;space&gt;The&lt;space&gt;input&lt;space&gt;directory&lt;space&gt;who&lt;apos&gt;s&lt;space&gt;objects&lt;space&gt;are&lt;space&gt;to&lt;space&gt;be&lt;space&gt;listed&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;no&lt;space&gt;value&lt;space&gt;is&lt;space&gt;provided&lt;space&gt;will&lt;space&gt;list&lt;space&gt;all&lt;space&gt;objects&lt;space&gt;in&lt;space&gt;the&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;bucket&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:type&lt;space&gt;inDir:&lt;space&gt;str&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:return:&lt;space&gt;list&lt;space&gt;of&lt;space&gt;the&lt;space&gt;object&lt;space&gt;names&lt;space&gt;in&lt;space&gt;the&lt;space&gt;bucket&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;:rtype:&lt;space&gt;list&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;indir:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;inDir&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;inDir&lt;space&gt;is&lt;space&gt;None:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;inDir&lt;space&gt;=&lt;space&gt;&lt;apos&gt;&lt;solidus&gt;&lt;apos&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;objects&lt;space&gt;=&lt;space&gt;self.minIoClient.list_objects&lt;openparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;CONST.OBJECTSTORE_BUCKET&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;recursive=False&lt;comma&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;prefix=inDir&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;retVal&lt;space&gt;=&lt;space&gt;objects&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;returnFileNamesOnly:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;getting&lt;space&gt;only&lt;space&gt;object&lt;space&gt;names&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;retVal&lt;space&gt;=&lt;space&gt;&lt;openbracket&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;obj&lt;space&gt;in&lt;space&gt;objects:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;retVal.append&lt;openparen&gt;obj.object_name&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;objects:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;objects&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;retVal&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;fileExists&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inFile=None&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;exists&lt;space&gt;=&lt;space&gt;False&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;inPath&lt;space&gt;=&lt;space&gt;os.path.dirname&lt;openparen&gt;inFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fileList&lt;space&gt;=&lt;space&gt;self.listObjects&lt;openparen&gt;inPath&lt;comma&gt;&lt;space&gt;returnFileNamesOnly=True&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;for&lt;space&gt;curFile&lt;space&gt;in&lt;space&gt;fileList:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;file:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;curFile&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;curFile&lt;space&gt;==&lt;space&gt;inFile:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;exists&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;break&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;exists&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getEtag&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;inFilePath:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#stat_object&lt;openparen&gt;bucket_name&lt;comma&gt;&lt;space&gt;object_name&lt;comma&gt;&lt;space&gt;ssec=None&lt;comma&gt;&lt;space&gt;version_id=None&lt;comma&gt;&lt;space&gt;extra_query_params=None&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;stat&lt;space&gt;=&lt;space&gt;self.minIoClient.stat_object&lt;openparen&gt;CONST.OBJECTSTORE_BUCKET&lt;comma&gt;&lt;space&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;for&lt;space&gt;attr&lt;space&gt;in&lt;space&gt;dir&lt;openparen&gt;stat&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;obj.%s&lt;space&gt;=&lt;space&gt;%r&lt;quote&gt;&lt;space&gt;%&lt;space&gt;&lt;openparen&gt;attr&lt;comma&gt;&lt;space&gt;getattr&lt;openparen&gt;stat&lt;comma&gt;&lt;space&gt;attr&lt;closeparen&gt;&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;tab&gt;opts.UserMetadata&lt;openbracket&gt;&lt;quote&gt;x-amz-acl&lt;quote&gt;&lt;closebracket&gt;&lt;space&gt;=&lt;space&gt;&lt;quote&gt;public-read&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;userMetaData&lt;space&gt;:=&lt;space&gt;map&lt;openbracket&gt;string&lt;closebracket&gt;string&lt;opencurly&gt;&lt;quote&gt;x-amz-acl&lt;quote&gt;:&lt;space&gt;&lt;quote&gt;public-read&lt;quote&gt;&lt;closecurly&gt;&lt;lf&gt;&lt;tab&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;n&lt;comma&gt;&lt;space&gt;err&lt;space&gt;:=&lt;space&gt;minioClient.PutObject&lt;openparen&gt;bucketName&lt;comma&gt;&lt;space&gt;objectName&lt;comma&gt;&lt;space&gt;fileObject&lt;comma&gt;&lt;space&gt;contentLength&lt;comma&gt;&lt;space&gt;minio.PutObjectOptions&lt;opencurly&gt;ContentType:&lt;space&gt;contentType&lt;comma&gt;&lt;space&gt;CacheControl:&lt;space&gt;cacheControl&lt;comma&gt;&lt;space&gt;UserMetadata:&lt;space&gt;userMetaData&lt;closecurly&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;stat.etag&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;createAndUploadChangeFile&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inFilePath&lt;comma&gt;&lt;space&gt;changeFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;inFilePath:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;etag&lt;space&gt;=&lt;space&gt;self.getEtag&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;etagBytes&lt;space&gt;=&lt;space&gt;etag.encode&lt;openparen&gt;&lt;apos&gt;utf-8&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;etagStream&lt;space&gt;=&lt;space&gt;io.BytesIO&lt;openparen&gt;etagBytes&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;retVal&lt;space&gt;=&lt;space&gt;self.minIoClient.put_object&lt;openparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;CONST.OBJECTSTORE_BUCKET&lt;comma&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;changeFilePath&lt;comma&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;etagStream&lt;comma&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;length=len&lt;openparen&gt;etagBytes&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;return&lt;space&gt;value&lt;space&gt;from&lt;space&gt;upload&lt;space&gt;of&lt;space&gt;etag&lt;space&gt;for&lt;space&gt;file:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;is&lt;space&gt;&lt;opencurly&gt;1&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;changeFilePath&lt;comma&gt;&lt;space&gt;retVal&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;getCachedEtag&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;fileChangeFile&lt;space&gt;=&lt;space&gt;self.calcChangeFile&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;resp&lt;space&gt;=&lt;space&gt;self.minIoClient.get_object&lt;openparen&gt;CONST.OBJECTSTORE_BUCKET&lt;comma&gt;&lt;space&gt;fileChangeFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;resp.data:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;resp.data&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;resp:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;resp&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;resp.data&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;hasChanged&lt;openparen&gt;self&lt;comma&gt;&lt;space&gt;inFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;Returns&lt;space&gt;a&lt;space&gt;true&lt;space&gt;or&lt;space&gt;false&lt;space&gt;that&lt;space&gt;indicates&lt;space&gt;if&lt;space&gt;the&lt;space&gt;input&lt;space&gt;file&lt;space&gt;has&lt;space&gt;changed&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;quote&gt;&lt;quote&gt;&lt;quote&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.info&lt;openparen&gt;&lt;quote&gt;Checking&lt;space&gt;the&lt;space&gt;file&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;to&lt;space&gt;see&lt;space&gt;if&lt;space&gt;it&lt;space&gt;has&lt;space&gt;changed&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;hasChanged&lt;space&gt;=&lt;space&gt;False&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;changeFilePath&lt;space&gt;=&lt;space&gt;self.calcChangeFile&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;change&lt;space&gt;file:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;changeFilePath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;not&lt;space&gt;self.fileExists&lt;openparen&gt;changeFilePath&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;The&lt;space&gt;file:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;space&gt;does&lt;space&gt;not&lt;space&gt;exist&lt;quote&gt;.format&lt;openparen&gt;changeFilePath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;The&lt;space&gt;input&lt;space&gt;file:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.createAndUploadChangeFile&lt;openparen&gt;inFilePath&lt;comma&gt;&lt;space&gt;changeFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;first&lt;space&gt;time&lt;space&gt;through&lt;space&gt;if&lt;space&gt;the&lt;space&gt;file&lt;space&gt;change&lt;space&gt;file&lt;space&gt;does&lt;space&gt;not&lt;space&gt;exist&lt;space&gt;then&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;assumption&lt;space&gt;is&lt;space&gt;made&lt;space&gt;that&lt;space&gt;the&lt;space&gt;data&lt;space&gt;has&lt;space&gt;changed.&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;hasChanged&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;etag&lt;space&gt;exists...&lt;space&gt;now&lt;space&gt;download&lt;space&gt;the&lt;space&gt;file&lt;space&gt;change&lt;space&gt;and&lt;space&gt;the&lt;space&gt;current&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;etag&lt;space&gt;on&lt;space&gt;the&lt;space&gt;file.&lt;space&gt;&lt;space&gt;Compare&lt;space&gt;to&lt;space&gt;determine&lt;space&gt;change&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;change&lt;space&gt;file&lt;space&gt;found!&lt;space&gt;&lt;space&gt;getting&lt;space&gt;etag&lt;space&gt;data&lt;quote&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;currentEtag&lt;space&gt;=&lt;space&gt;self.getEtag&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;current&lt;space&gt;etag:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;currentEtag&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;cachedEtag&lt;space&gt;=&lt;space&gt;self.getCachedEtag&lt;openparen&gt;inFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;cached&lt;space&gt;etag:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;cachedEtag&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;cachedEtag&lt;space&gt;!=&lt;space&gt;currentEtag:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;hasChanged&lt;space&gt;=&lt;space&gt;True&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;return&lt;space&gt;hasChanged&lt;lf&gt;&lt;lf&gt;CONST&lt;space&gt;=&lt;space&gt;constants&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;class&lt;space&gt;S3ChangeDetector&lt;openparen&gt;object&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;__init__&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.srcFile&lt;space&gt;=&lt;space&gt;fme.macroValues&lt;openbracket&gt;&lt;apos&gt;SRC_DATASET_FGDB_1&lt;apos&gt;&lt;closebracket&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.objChng&lt;space&gt;=&lt;space&gt;ObjectChange&lt;openparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.fixedFile&lt;space&gt;=&lt;space&gt;self.objChng.fixPath&lt;openparen&gt;self.srcFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;LOGGER.debug&lt;openparen&gt;&lt;quote&gt;fixed&lt;space&gt;file&lt;space&gt;path&lt;space&gt;is:&lt;space&gt;&lt;opencurly&gt;0&lt;closecurly&gt;&lt;quote&gt;.format&lt;openparen&gt;self.fixedFile&lt;closeparen&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.objectChangeStatus&lt;space&gt;=&lt;space&gt;self.objChng.hasChanged&lt;openparen&gt;self.fixedFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;input&lt;openparen&gt;self&lt;comma&gt;feature&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#if&lt;space&gt;self.objectChangeStatus&lt;space&gt;is&lt;space&gt;None:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;dataSet&lt;space&gt;=&lt;space&gt;feature.getAttribute&lt;openparen&gt;&lt;apos&gt;fme_dataset&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.objectChangeStatus&lt;space&gt;=&lt;space&gt;self.objChng.hasChanged&lt;openparen&gt;dataSet&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;self.objectChangeStatus:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;CHANGE_DETECTED&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;TRUE&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;else:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;feature.setAttribute&lt;openparen&gt;&lt;apos&gt;CHANGE_DETECTED&lt;apos&gt;&lt;comma&gt;&lt;space&gt;&lt;apos&gt;FALSE&lt;apos&gt;&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.pyoutput&lt;openparen&gt;feature&lt;closeparen&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;pylint:&lt;space&gt;disable=no-member&lt;lf&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;def&lt;space&gt;close&lt;openparen&gt;self&lt;closeparen&gt;:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;if&lt;space&gt;self.objectChangeStatus:&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;#&lt;space&gt;update&lt;space&gt;the&lt;space&gt;change&lt;space&gt;file&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;changeFilePath&lt;space&gt;=&lt;space&gt;self.objChng.calcChangeFile&lt;openparen&gt;self.fixedFile&lt;closeparen&gt;&lt;lf&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;&lt;space&gt;self.objChng.createAndUploadChangeFile&lt;openparen&gt;self.fixedFile&lt;comma&gt;&lt;space&gt;changeFilePath&lt;closeparen&gt;&lt;lf&gt;&lt;lf&gt;&lt;lf&gt;"/>
#!     <XFORM_PARM PARM_NAME="PYTHONSYMBOL" PARM_VALUE="S3ChangeDetector"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="S3FileChangeDetector"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="9"
#!   TYPE="AttributeExposer"
#!   VERSION="0"
#!   POSITION="734.00697606421863 -979.63372331172081"
#!   BOUNDING_RECT="734.00697606421863 -979.63372331172081 0 0"
#!   ORDER="9"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="14440"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="CHANGE_DETECTED" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_PARM PARM_NAME="ATTR_LIST" PARM_VALUE="CHANGE_DETECTED"/>
#!     <XFORM_PARM PARM_NAME="ATTR_LIST_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CD_3:_ExposeChangeAttribute"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="12"
#!   TYPE="AttributeFilter"
#!   VERSION="2"
#!   POSITION="780.75439179562704 -1227.5125726030753"
#!   BOUNDING_RECT="780.75439179562704 -1227.5125726030753 0 0"
#!   ORDER="10"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="14440"
#! >
#!     <OUTPUT_FEAT NAME="TRUE"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <XFORM_ATTR ATTR_NAME="CHANGE_DETECTED" IS_USER_CREATED="false" FEAT_INDEX="0" />
#!     <OUTPUT_FEAT NAME="FALSE"/>
#!     <FEAT_COLLAPSED COLLAPSED="1"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <XFORM_ATTR ATTR_NAME="CHANGE_DETECTED" IS_USER_CREATED="false" FEAT_INDEX="1" />
#!     <OUTPUT_FEAT NAME="&lt;BLANK&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="2"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <XFORM_ATTR ATTR_NAME="CHANGE_DETECTED" IS_USER_CREATED="false" FEAT_INDEX="2" />
#!     <OUTPUT_FEAT NAME="&lt;UNFILTERED&gt;"/>
#!     <FEAT_COLLAPSED COLLAPSED="3"/>
#!     <XFORM_ATTR ATTR_NAME="fme_dataset" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_ATTR ATTR_NAME="CHANGE_DETECTED" IS_USER_CREATED="false" FEAT_INDEX="3" />
#!     <XFORM_PARM PARM_NAME="ATTR_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="ATTR_NAME" PARM_VALUE="CHANGE_DETECTED"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES" PARM_VALUE="TRUE,FALSE"/>
#!     <XFORM_PARM PARM_NAME="ATTR_VALUES_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_GROUP" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CD_4:_FilterOnChangeDetected"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="19"
#!   TYPE="AttributeRemover"
#!   VERSION="0"
#!   POSITION="1771.8927184271893 -1377.0126251262514"
#!   BOUNDING_RECT="1771.8927184271893 -1377.0126251262514 0 0"
#!   ORDER="11"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="14440"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE="-"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="CHANGE_DETECTED,fme_dataset"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE="-"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CD_5:_CleanAttsFromChanged"/>
#! </TRANSFORMER>
#! <TRANSFORMER
#!   IDENTIFIER="22"
#!   TYPE="AttributeRemover"
#!   VERSION="0"
#!   POSITION="1485.2668914206283 -790.386160836096"
#!   BOUNDING_RECT="1485.2668914206283 -790.386160836096 0 0"
#!   ORDER="11"
#!   PARMS_EDITED="true"
#!   ENABLED="true"
#!   LAST_PARM_EDIT="14440"
#! >
#!     <OUTPUT_FEAT NAME="OUTPUT"/>
#!     <FEAT_COLLAPSED COLLAPSED="0"/>
#!     <XFORM_PARM PARM_NAME="LIST_ATTRS" PARM_VALUE=""/>
#!     <XFORM_PARM PARM_NAME="PARAMETERS_GROUP" PARM_VALUE="-"/>
#!     <XFORM_PARM PARM_NAME="REMOVE_ATTRS" PARM_VALUE="CHANGE_DETECTED,fme_dataset"/>
#!     <XFORM_PARM PARM_NAME="TRANSFORMER_GROUP" PARM_VALUE="-"/>
#!     <XFORM_PARM PARM_NAME="XFORMER_NAME" PARM_VALUE="CD_5:_CleanAttsFromChanged_2"/>
#! </TRANSFORMER>
#! </TRANSFORMERS>
#! <SUBDOCUMENT_IOS>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="2"
#!   NAME="Input"
#!   POSITION="90.624906249062462 -271.8767187671877"
#!   BOUNDING_RECT="90.624906249062462 -271.8767187671877 -1 -1"
#!   COLLAPSED="true"
#!   PUBLISHED="true"
#!   IS_SOURCE="true"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="16"
#!   NAME="CHANGES"
#!   POSITION="2184.3968434684398 -349.75237949828249"
#!   BOUNDING_RECT="2184.3968434684398 -349.75237949828249 0 0"
#!   COLLAPSED="false"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! <SUBDOCUMENT_IO
#!   IDENTIFIER="15"
#!   NAME="NO_CHANGES"
#!   POSITION="2184.3968434684398 -790.386160836096"
#!   BOUNDING_RECT="2184.3968434684398 -790.386160836096 0 0"
#!   COLLAPSED="false"
#!   IS_SOURCE="false"
#!   ATTR_MODE="0"
#! >
#! </SUBDOCUMENT_IO>
#! </SUBDOCUMENT_IOS>
#! <FEAT_LINKS>
#! <FEAT_LINK
#!   IDENTIFIER="7"
#!   SOURCE_NODE="2"
#!   TARGET_NODE="4"
#!   SOURCE_PORT_DESC="0"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="8"
#!   SOURCE_NODE="4"
#!   TARGET_NODE="6"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="11"
#!   SOURCE_NODE="6"
#!   TARGET_NODE="9"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="14"
#!   SOURCE_NODE="9"
#!   TARGET_NODE="12"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="17"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="22"
#!   SOURCE_PORT_DESC="fo 0 TRUE"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="21"
#!   SOURCE_NODE="19"
#!   TARGET_NODE="15"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="24"
#!   SOURCE_NODE="22"
#!   TARGET_NODE="16"
#!   SOURCE_PORT_DESC="fo 0 OUTPUT"
#!   TARGET_PORT_DESC="0"
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! <FEAT_LINK
#!   IDENTIFIER="18"
#!   SOURCE_NODE="12"
#!   TARGET_NODE="19"
#!   SOURCE_PORT_DESC="fo 1 FALSE"
#!   TARGET_PORT_DESC="fi 0 "
#!   ENABLED="true"
#!   EXECUTION_IDX="0"
#!   HIDDEN="false"
#!   EXTRA_POINTS=""
#! />
#! </FEAT_LINKS>
#! <BREAKPOINTS>
#! </BREAKPOINTS>
#! <ATTR_LINKS>
#! </ATTR_LINKS>
#! <SUBDOCUMENTS>
#! </SUBDOCUMENTS>
#! <LOOKUP_TABLES>
#! </LOOKUP_TABLES>
#! </TRANSFORMER>

FME_PYTHON_VERSION 27
#! START_HEADER
#! END_HEADER

DEFAULT_MACRO WB_CURRENT_CONTEXT
DEFAULT_MACRO S3FileChangeDetector_WORKSPACE_NAME ""
INCLUDE [puts {MACRO WB_OLD_CONTEXT_$(S3FileChangeDetector_WORKSPACE_NAME) $(WB_CURRENT_CONTEXT)};          puts {MACRO WB_CURRENT_CONTEXT $(S3FileChangeDetector_WORKSPACE_NAME)}]
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(S3FileChangeDetector_WORKSPACE_NAME)_Input1649346358 Input Splitter"   INPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_Input"   OUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_Input"
# -------------------------------------------------------------------------
# Expose all attributes.  This ensures that if you expose fme_dataset, you will get it.
READER_META_ATTRIBUTES fme_feature_type fme_dataset fme_basename
FACTORY_DEF * TeeFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_1:_ExposeFMEDatasetName    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_Input"    OUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_1:_ExposeFMEDatasetName_OUTPUT"
# -------------------------------------------------------------------------
FME_PYTHON_PATH "$(FME_MF_DIR)"
FACTORY_DEF * PythonFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_S3FileChangeDetector    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_1:_ExposeFMEDatasetName_OUTPUT"    SYMBOL_NAME S3ChangeDetector    PYTHON_NAMESPACE FMEOBJECTS    SOURCE_CODE <quote><quote><quote><lf>Code<space>here<space>will<space>get<space>put<space>into<space>an<space>FME<space>transformer<space>to<space>support<space>the<space>ability<space>to<space>detect<lf>file<space>change<space>on<space>an<space>object<space>storage<space>object.<lf><lf>How<space>it<space>works?<lf><lf>a<closeparen><space>Inputs:<space>name<space><solidus><space>path<space>to<space>a<space>file<space>in<space>object<space>storage<lf>b<closeparen><space>script<space>will<space>look<space>for<space>the<space>eqivalent<space>file<space>with<space>a<space>.filechange<space>suffix<space>on<space>it<lf><space><space><space>if<space>that<space>file<space>doesn<apos>t<space>exist<space>it<space>is<space>created<space>and<space>the<space>contents<space>of<space>the<space>objects<lf><space><space><space>etag<space>is<space>copied<space>to<space>that<space>file<lf>c<closeparen><space>if<space>the<space>file<space>does<space>exist<space>the<space>contents<space>of<space>the<space>file<space>are<space>compared<space>with<space>the<space>etag<lf><space><space><space>that<space>exists<space>in<space>object<space>storage.<space><space>If<space>they<space>differ<space>the<space>file<space>has<space>changed<comma><space>if<space>they<lf><space><space><space>are<space>the<space>same<space>the<space>file<space>has<space>not<space>changed.<lf><quote><quote><quote><lf><lf>import<space>os<lf>import<space>requests<lf>import<space>logging<lf>import<space>sys<lf>import<space>io<lf>from<space>urlparse<space>import<space>urlparse<lf><lf><lf><lf>LOGGER<space>=<space>logging.getLogger<openparen><closeparen><lf><lf>class<space>ModuleInit:<lf><space><space><space><space><quote><quote><quote><space>this<space>is<space>a<space>hack<space>to<space>handle<space>the<space>s3<space>dependencies<space>this<space>module<space>will<space>search<lf><space><space><space><space><space><space><space><space>the<space>directory<space>that<space>this<space>script<space>is<space>being<space>run<space>in<space>for<space>the<space>minio<space>module.<lf><space><space><space><space><space><space><space><space>it<space>it<space>cannot<space>be<space>found<space>then<space>the<space>class<space>will<space>install<space>it<lf><space><space><space><space><quote><quote><quote><lf><lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.installdir<space>=<space><apos>pydeps<apos><lf><space><space><space><space><space><space><space><space>self.configurePaths<openparen><closeparen><lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>importing<space>minio<quote><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>global<space>minio<lf><space><space><space><space><space><space><space><space><space><space><space><space>import<space>minio<lf><space><space><space><space><space><space><space><space>except:<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.info<openparen><quote>fetching<space>the<space>minio<space>module<quote><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.install<openparen><closeparen><lf><lf><space><space><space><space>def<space>configurePaths<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>FME_MF_DIR_UNIX_MASTER<lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>curDir<space>=<space>os.path.dirname<openparen>__file__<closeparen><lf><space><space><space><space><space><space><space><space>except<space>NameError:<lf><space><space><space><space><space><space><space><space><space><space><space><space>import<space>fme<lf><space><space><space><space><space><space><space><space><space><space><space><space>#print<space><apos>-<apos>*80<lf><space><space><space><space><space><space><space><space><space><space><space><space>#for<space>var<space>in<space>fme.macroValues:<lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space><space><space><space>print<space>var<comma><space><quote><apos><quote><comma><space>fme.macroValues<openbracket>var<closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>curDir<space>=<space>os.path.realpath<openparen>fme.macroValues<openbracket><apos>FME_MF_DIR_UNIX_MASTER<apos><closebracket><closeparen><lf><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space><space><space><space><space>#curDir<space>=<space>os.path.dirname<openparen>__file__<closeparen><lf><space><space><space><space><space><space><space><space>self.depDir<space>=<space>os.path.realpath<openparen>os.path.join<openparen>curDir<comma><space>self.installdir<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>os.path.exists<openparen>self.depDir<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>os.mkdir<openparen>self.depDir<closeparen><lf><space><space><space><space><space><space><space><space>pathList<space>=<space>os.environ<openbracket><apos>PATH<apos><closebracket>.split<openparen><apos><semicolon><apos><closeparen><lf><space><space><space><space><space><space><space><space>pathList.insert<openparen>0<comma><space>self.depDir<closeparen><lf><space><space><space><space><space><space><space><space>sys.path.insert<openparen>0<comma><space>self.depDir<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>depdir:<space><opencurly>0<closecurly><quote>.format<openparen>self.depDir<closeparen><closeparen><lf><lf><space><space><space><space>def<space>install<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>trustParams<space>=<space><quote>--trusted-host<space>pypi.org<space>--trusted-host<space>pypi.python.ordfg<space>--trusted-host<space>files.pythonhosted.org<quote><lf><space><space><space><space><space><space><space><space>#pipInstall<space>=<space><apos>pip<space>install<space><opencurly>0<closecurly><space>-t<space><opencurly>1<closecurly><space>minio<space>--global<space>http.sslVerify<space>false<apos>.format<openparen>trustParams<comma><space>depDir<closeparen><lf><space><space><space><space><space><space><space><space>pipInstall<space>=<space><apos>python<space>-m<space>pip<space>install<space>-t<space><opencurly>0<closecurly><space>minio==5.0.10<apos>.format<openparen><space>self.depDir<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen>pipInstall<closeparen><space><lf><space><space><space><space><space><space><space><space>print<space>pipInstall<lf><space><space><space><space><space><space><space><space>os.system<openparen>pipInstall<closeparen><lf><lf><space><space><space><space><space><space><space><space>#LOGGER.debug<openparen><quote>var:<space><opencurly>0<closecurly><quote>.format<openparen>os.environ<openbracket><apos>PATH<apos><closebracket><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>import<space>minio<lf><lf><lf>class<space>constants:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.envVars<space>=<space><openbracket><apos>OBJECTSTORE_HOST<apos><comma><space><apos>OBJECTSTORE_BUCKET<apos><comma><space><apos>OBJECTSTORE_ID<apos><comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><apos>OBJECTSTORE_SECRET<apos><closebracket><lf><space><space><space><space><space><space><space><space>try:<lf><space><space><space><space><space><space><space><space><space><space><space><space>import<space>fme<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.getFMEMacroVars<openparen><closeparen><lf><space><space><space><space><space><space><space><space>except<space>ImportError:<lf><space><space><space><space><space><space><space><space><space><space><space><space>self.getEnvVars<openparen><closeparen><lf><lf><lf><lf><space><space><space><space>def<space>getFMEMacroVars<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>for<space>envVar<space>in<space>self.envVars:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>envVar<space>not<space>in<space>fme.macroValues:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>msg<space>=<space><quote>Expecting<space>the<space>following<space>published<space>parameter:<space><opencurly>0<closecurly><space>to<space>exist<space>but<space>it<space>cannot<space>be<space>found<quote>.format<openparen>envVar<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>ValueError<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>setattr<openparen>self<comma><space>envVar<comma><space>fme.macroValues<openbracket>envVar<closebracket><closeparen><lf><lf><space><space><space><space>def<space>getEnvVars<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space>slurping<space>the<space>list<space>of<space>env<space>vars<space>below<space>into<space>constants<lf><space><space><space><space><space><space><space><space>for<space>envVar<space>in<space>self.envVars:<lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>envVar<space>not<space>in<space>os.environ:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>msg<space>=<space><quote>expecting<space>the<space>following<space>env<space>vars<space>to<space>be<space>set<space>and<space>one<space>or<space><quote><space>+<space><backslash><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><quote>more<space>of<space>them<space>are<space>not:<space><quote><space>+<space><apos><comma><apos>.join<openparen>self.envVars<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>raise<space>ValueError<openparen>msg<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>setattr<openparen>self<comma><space>envVar<comma><space>os.environ<openbracket>envVar<closebracket><closeparen><lf><lf>class<space>ObjectChange:<lf><lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.installer<space>=<space>ModuleInit<openparen><closeparen><lf><space><space><space><space><space><space><space><space>self.changeSuffix<space>=<space><apos>.filechange<apos><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>connecting<space>to<space>object<space>storage<quote><closeparen><lf><space><space><space><space><space><space><space><space>self.minIoClient<space>=<space>minio.Minio<openparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>CONST.OBJECTSTORE_HOST<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>CONST.OBJECTSTORE_ID<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>CONST.OBJECTSTORE_SECRET<lf><space><space><space><space><space><space><space><space><closeparen><lf><lf><space><space><space><space>def<space>fixPath<openparen>self<comma><space>inputFile<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote><space>the<space>input<space>file<space>can<space>be<space>a<space>url<space>path<comma><space>if<space>this<space>is<space>the<space>case<space>the<space>assumption<space>is<space>that<space><lf><space><space><space><space><space><space><space><space>it<space>takes<space>this<space>format:<lf><lf><space><space><space><space><space><space><space><space>https:<solidus><solidus><lt>obj<space>store<space>domain<gt><solidus><lt>bucket<space>name<gt><solidus><lt>path<space>to<space>object<gt><lf><lf><space><space><space><space><space><space><space><space>This<space>method<space>will<space>extract<space>the<space>object<space>name<solidus>path<space>from<space>the<space>url.<lf><lf><space><space><space><space><space><space><space><space>:param<space>path:<space>input<space>path<lf><space><space><space><space><space><space><space><space>:type<space>path:str<lf><lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>t<space>=<space>urlparse<openparen>inputFile<closeparen><lf><space><space><space><space><space><space><space><space>path<space>=<space>t.path<lf><space><space><space><space><space><space><space><space>path<space>=<space>path.replace<openparen><quote><solidus><quote><space>+<space>CONST.OBJECTSTORE_BUCKET<comma><space><apos><apos><closeparen><lf><space><space><space><space><space><space><space><space>if<space>path<openbracket>0<closebracket><space>==<space><apos><solidus><apos>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>path<space>=<space>path<openbracket>1:<closebracket><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>new<space>path:<space><opencurly>0<closecurly><quote>.format<openparen>path<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>path<lf><lf><space><space><space><space>def<space>calcChangeFile<openparen>self<comma><space>inputFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space>changeFilePath<space>=<space>os.path.splitext<openparen>inputFilePath<closeparen><openbracket>0<closebracket><space>+<space>self.changeSuffix<lf><space><space><space><space><space><space><space><space>return<space>changeFilePath<lf><lf><space><space><space><space>def<space>listObjects<openparen>self<comma><space>inDir=None<comma><space>recursive=True<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>returnFileNamesOnly=False<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>lists<space>the<space>objects<space>in<space>the<space>object<space>store.<space><space>Run<apos>s<space>recursive<comma><space>if<lf><space><space><space><space><space><space><space><space>inDir<space>arg<space>is<space>provided<space>only<space>lists<space>objects<space>that<space>fall<space>under<space>that<lf><space><space><space><space><space><space><space><space>directory<lf><space><space><space><space><space><space><space><space>:param<space>inDir:<space>The<space>input<space>directory<space>who<apos>s<space>objects<space>are<space>to<space>be<space>listed<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>if<space>no<space>value<space>is<space>provided<space>will<space>list<space>all<space>objects<space>in<space>the<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>bucket<lf><space><space><space><space><space><space><space><space>:type<space>inDir:<space>str<lf><space><space><space><space><space><space><space><space>:return:<space>list<space>of<space>the<space>object<space>names<space>in<space>the<space>bucket<lf><space><space><space><space><space><space><space><space>:rtype:<space>list<lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>indir:<space><opencurly>0<closecurly><quote>.format<openparen>inDir<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>inDir<space>is<space>None:<lf><space><space><space><space><space><space><space><space><space><space><space><space>inDir<space>=<space><apos><solidus><apos><lf><space><space><space><space><space><space><space><space>objects<space>=<space>self.minIoClient.list_objects<openparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>CONST.OBJECTSTORE_BUCKET<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>recursive=False<comma><lf><space><space><space><space><space><space><space><space><space><space><space><space>prefix=inDir<lf><space><space><space><space><space><space><space><space><closeparen><lf><space><space><space><space><space><space><space><space>retVal<space>=<space>objects<lf><space><space><space><space><space><space><space><space>if<space>returnFileNamesOnly:<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>getting<space>only<space>object<space>names<quote><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>retVal<space>=<space><openbracket><closebracket><lf><space><space><space><space><space><space><space><space><space><space><space><space>for<space>obj<space>in<space>objects:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>retVal.append<openparen>obj.object_name<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>objects:<space><opencurly>0<closecurly><quote>.format<openparen>objects<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>retVal<lf><lf><space><space><space><space>def<space>fileExists<openparen>self<comma><space>inFile=None<closeparen>:<lf><space><space><space><space><space><space><space><space>exists<space>=<space>False<lf><space><space><space><space><space><space><space><space>inPath<space>=<space>os.path.dirname<openparen>inFile<closeparen><lf><space><space><space><space><space><space><space><space>fileList<space>=<space>self.listObjects<openparen>inPath<comma><space>returnFileNamesOnly=True<closeparen><lf><space><space><space><space><space><space><space><space>for<space>curFile<space>in<space>fileList:<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>file:<space><opencurly>0<closecurly><quote>.format<openparen>curFile<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>curFile<space>==<space>inFile:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>exists<space>=<space>True<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>break<lf><space><space><space><space><space><space><space><space>return<space>exists<lf><lf><space><space><space><space>def<space>getEtag<openparen>self<comma><space>inFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>inFilePath:<space><opencurly>0<closecurly><quote>.format<openparen>inFilePath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>#stat_object<openparen>bucket_name<comma><space>object_name<comma><space>ssec=None<comma><space>version_id=None<comma><space>extra_query_params=None<closeparen><lf><space><space><space><space><space><space><space><space>stat<space>=<space>self.minIoClient.stat_object<openparen>CONST.OBJECTSTORE_BUCKET<comma><space>inFilePath<closeparen><lf><space><space><space><space><space><space><space><space>#<space>for<space>attr<space>in<space>dir<openparen>stat<closeparen>:<lf><space><space><space><space><space><space><space><space>#<space><space><space><space>LOGGER.debug<openparen><quote>obj.%s<space>=<space>%r<quote><space>%<space><openparen>attr<comma><space>getattr<openparen>stat<comma><space>attr<closeparen><closeparen><closeparen><lf><space><space><space><space><space><space><space><space>#<tab>opts.UserMetadata<openbracket><quote>x-amz-acl<quote><closebracket><space>=<space><quote>public-read<quote><lf><space><space><space><space><space><space><space><space>#<space>userMetaData<space>:=<space>map<openbracket>string<closebracket>string<opencurly><quote>x-amz-acl<quote>:<space><quote>public-read<quote><closecurly><lf><tab><space><space><space><space>#<space>n<comma><space>err<space>:=<space>minioClient.PutObject<openparen>bucketName<comma><space>objectName<comma><space>fileObject<comma><space>contentLength<comma><space>minio.PutObjectOptions<opencurly>ContentType:<space>contentType<comma><space>CacheControl:<space>cacheControl<comma><space>UserMetadata:<space>userMetaData<closecurly><closeparen><lf><space><space><space><space><space><space><space><space>return<space>stat.etag<lf><lf><space><space><space><space>def<space>createAndUploadChangeFile<openparen>self<comma><space>inFilePath<comma><space>changeFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>inFilePath:<space><opencurly>0<closecurly><quote>.format<openparen>inFilePath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>etag<space>=<space>self.getEtag<openparen>inFilePath<closeparen><lf><lf><space><space><space><space><space><space><space><space>etagBytes<space>=<space>etag.encode<openparen><apos>utf-8<apos><closeparen><lf><space><space><space><space><space><space><space><space>etagStream<space>=<space>io.BytesIO<openparen>etagBytes<closeparen><lf><lf><space><space><space><space><space><space><space><space>retVal<space>=<space>self.minIoClient.put_object<openparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>CONST.OBJECTSTORE_BUCKET<comma><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>changeFilePath<comma><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>etagStream<comma><space><lf><space><space><space><space><space><space><space><space><space><space><space><space>length=len<openparen>etagBytes<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>return<space>value<space>from<space>upload<space>of<space>etag<space>for<space>file:<space><opencurly>0<closecurly><space>is<space><opencurly>1<closecurly><quote>.format<openparen>changeFilePath<comma><space>retVal<closeparen><closeparen><lf><lf><space><space><space><space>def<space>getCachedEtag<openparen>self<comma><space>inFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space>fileChangeFile<space>=<space>self.calcChangeFile<openparen>inFilePath<closeparen><lf><space><space><space><space><space><space><space><space>resp<space>=<space>self.minIoClient.get_object<openparen>CONST.OBJECTSTORE_BUCKET<comma><space>fileChangeFile<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>resp.data:<space><opencurly>0<closecurly><quote>.format<openparen>resp.data<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>resp:<space><opencurly>0<closecurly><quote>.format<openparen>resp<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>return<space>resp.data<lf><lf><space><space><space><space>def<space>hasChanged<openparen>self<comma><space>inFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space><quote><quote><quote>Returns<space>a<space>true<space>or<space>false<space>that<space>indicates<space>if<space>the<space>input<space>file<space>has<space>changed<lf><space><space><space><space><space><space><space><space><quote><quote><quote><lf><space><space><space><space><space><space><space><space>LOGGER.info<openparen><quote>Checking<space>the<space>file<space><opencurly>0<closecurly><space>to<space>see<space>if<space>it<space>has<space>changed<quote><closeparen><lf><space><space><space><space><space><space><space><space>hasChanged<space>=<space>False<lf><space><space><space><space><space><space><space><space>changeFilePath<space>=<space>self.calcChangeFile<openparen>inFilePath<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>change<space>file:<space><opencurly>0<closecurly><quote>.format<openparen>changeFilePath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>if<space>not<space>self.fileExists<openparen>changeFilePath<closeparen>:<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>The<space>file:<space><opencurly>0<closecurly><space>does<space>not<space>exist<quote>.format<openparen>changeFilePath<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>The<space>input<space>file:<space><opencurly>0<closecurly><quote>.format<openparen>inFilePath<closeparen><closeparen><lf><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.createAndUploadChangeFile<openparen>inFilePath<comma><space>changeFilePath<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space>first<space>time<space>through<space>if<space>the<space>file<space>change<space>file<space>does<space>not<space>exist<space>then<space><lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space>assumption<space>is<space>made<space>that<space>the<space>data<space>has<space>changed.<lf><space><space><space><space><space><space><space><space><space><space><space><space>hasChanged<space>=<space>True<lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space>etag<space>exists...<space>now<space>download<space>the<space>file<space>change<space>and<space>the<space>current<lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space>etag<space>on<space>the<space>file.<space><space>Compare<space>to<space>determine<space>change<lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>change<space>file<space>found!<space><space>getting<space>etag<space>data<quote><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>currentEtag<space>=<space>self.getEtag<openparen>inFilePath<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>current<space>etag:<space><opencurly>0<closecurly><quote>.format<openparen>currentEtag<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>cachedEtag<space>=<space>self.getCachedEtag<openparen>inFilePath<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>cached<space>etag:<space><opencurly>0<closecurly><quote>.format<openparen>cachedEtag<closeparen><closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>if<space>cachedEtag<space>!=<space>currentEtag:<lf><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space><space>hasChanged<space>=<space>True<lf><space><space><space><space><space><space><space><space>return<space>hasChanged<lf><lf>CONST<space>=<space>constants<openparen><closeparen><lf><lf><lf>class<space>S3ChangeDetector<openparen>object<closeparen>:<lf><space><space><space><space>def<space>__init__<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>self.srcFile<space>=<space>fme.macroValues<openbracket><apos>SRC_DATASET_FGDB_1<apos><closebracket><lf><space><space><space><space><space><space><space><space>self.objChng<space>=<space>ObjectChange<openparen><closeparen><lf><space><space><space><space><space><space><space><space>self.fixedFile<space>=<space>self.objChng.fixPath<openparen>self.srcFile<closeparen><lf><space><space><space><space><space><space><space><space>LOGGER.debug<openparen><quote>fixed<space>file<space>path<space>is:<space><opencurly>0<closecurly><quote>.format<openparen>self.fixedFile<closeparen><closeparen><lf><space><space><space><space><space><space><space><space>self.objectChangeStatus<space>=<space>self.objChng.hasChanged<openparen>self.fixedFile<closeparen><lf><space><space><space><space><space><space><space><space><lf><space><space><space><space>def<space>input<openparen>self<comma>feature<closeparen>:<lf><space><space><space><space><space><space><space><space>#if<space>self.objectChangeStatus<space>is<space>None:<lf><space><space><space><space><space><space><space><space>#<space><space><space><space>dataSet<space>=<space>feature.getAttribute<openparen><apos>fme_dataset<apos><closeparen><lf><space><space><space><space><space><space><space><space>#<space><space><space><space>self.objectChangeStatus<space>=<space>self.objChng.hasChanged<openparen>dataSet<closeparen><lf><lf><space><space><space><space><space><space><space><space>if<space>self.objectChangeStatus:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>CHANGE_DETECTED<apos><comma><space><apos>TRUE<apos><closeparen><lf><space><space><space><space><space><space><space><space>else:<lf><space><space><space><space><space><space><space><space><space><space><space><space>feature.setAttribute<openparen><apos>CHANGE_DETECTED<apos><comma><space><apos>FALSE<apos><closeparen><lf><space><space><space><space><space><space><space><space>self.pyoutput<openparen>feature<closeparen><space><space>#<space>pylint:<space>disable=no-member<lf><lf><space><space><space><space>def<space>close<openparen>self<closeparen>:<lf><space><space><space><space><space><space><space><space>if<space>self.objectChangeStatus:<lf><space><space><space><space><space><space><space><space><space><space><space><space>#<space>update<space>the<space>change<space>file<lf><space><space><space><space><space><space><space><space><space><space><space><space>changeFilePath<space>=<space>self.objChng.calcChangeFile<openparen>self.fixedFile<closeparen><lf><space><space><space><space><space><space><space><space><space><space><space><space>self.objChng.createAndUploadChangeFile<openparen>self.fixedFile<comma><space>changeFilePath<closeparen><lf><lf><lf>    OUTPUT PYOUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_S3FileChangeDetector_OUTPUT"
# -------------------------------------------------------------------------
# Expose all attributes.  This ensures that if you expose fme_dataset, you will get it.
READER_META_ATTRIBUTES fme_feature_type fme_dataset fme_basename
FACTORY_DEF * TeeFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_3:_ExposeChangeAttribute    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_S3FileChangeDetector_OUTPUT"    OUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_3:_ExposeChangeAttribute_OUTPUT"
# -------------------------------------------------------------------------
Lookup $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_AttributeFilterLut   TRUE ok   FALSE ok   <BLANK> ok   "" notok   ENCODED
Tcl2 proc $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_setFeatType {} {     global FME_FeatureType;     set ft {$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_};     append ft [FME_EncodeText [FME_GetAttribute {"CHANGE_DETECTED"}]];     set FME_FeatureType $ft; }
FACTORY_DEF * TestFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_3:_ExposeChangeAttribute_OUTPUT"    TEST @Lookup($(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_AttributeFilterLut,"CHANGE_DETECTED",ENCODED_ATTR) == "ok"    OUTPUT PASSED FEATURE_TYPE * @Tcl2($(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_setFeatType)    OUTPUT FAILED FEATURE_TYPE $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<UNFILTERED>
FACTORY_DEF * TestFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_BlankFilter    INPUT FEATURE_TYPE $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<UNFILTERED>    TEST @Value("CHANGE_DETECTED") == ""    OUTPUT PASSED FEATURE_TYPE $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<BLANK>    OUTPUT FAILED FEATURE_TYPE $(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<UNFILTERED>
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected <BLANK> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<BLANK>"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected <UNFILTERED> Transformer Output Nuker"   INPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_<UNFILTERED>"
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "{\[0-9\]+}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_FALSE"    OUTPUT { FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_OUTPUT"        @RemoveAttributes(CHANGE_DETECTED,fme_dataset)        @RemoveAttributes(fme_regexp_match"$($(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_LIST_EXP)")         }
# -------------------------------------------------------------------------
INCLUDE [    set macroLine "MACRO $(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_2_LIST_EXP ";    foreach attr [split ""] {       set attr [FME_DecodeText $attr];       set attr [regsub "{}$" $attr "{}.*"];       set attr [regsub -all "{}" $attr "{\[0-9\]+}"];       append macroLine ",^$attr$";    };    puts $macroLine; ]
FACTORY_DEF {*} TeeFactory    FACTORY_NAME $(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_2    INPUT  FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_4:_FilterOnChangeDetected_TRUE"    OUTPUT { FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_2_OUTPUT"        @RemoveAttributes(CHANGE_DETECTED,fme_dataset)        @RemoveAttributes(fme_regexp_match"$($(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_2_LIST_EXP)")         }
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(S3FileChangeDetector_WORKSPACE_NAME)_CHANGES1649346358 Output Collector"   INPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_2_OUTPUT"   OUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CHANGES"
FACTORY_DEF * TeeFactory   FACTORY_NAME "$(S3FileChangeDetector_WORKSPACE_NAME)_NO_CHANGES1649346358 Output Collector"   INPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_CD_5:_CleanAttsFromChanged_OUTPUT"   OUTPUT FEATURE_TYPE "$(S3FileChangeDetector_WORKSPACE_NAME)_NO_CHANGES"
INCLUDE [puts {MACRO WB_CURRENT_CONTEXT $(WB_OLD_CONTEXT_$(S3FileChangeDetector_WORKSPACE_NAME))}]
